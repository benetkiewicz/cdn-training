---
import Layout from "../../layouts/Layout.astro";
import godaddyDnsManagement from "../../../public/lesson3/godaddy-dns-management.png";
---

<style>
    .image-wrapper {
        background: #171717;
        border-radius: 8px;
        display: flex;
        justify-content: center;
        margin-top: 1rem;
        margin-bottom: 1rem;
        overflow-x: hidden;
        max-width: 100%;
    }

    /* Lesson specific styles moved from Layout */
    .lesson-content {
        max-width: var(--max-width);
        margin: 0 auto;
        background: white;
        padding: 1rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border: 1px solid var(--secondary);
        width: 100%;
        overflow-wrap: break-word;
        word-wrap: break-word;
        overflow-x: hidden;
        p,
        h2 {
            margin-top: 1rem;
        }

        ul {
            padding-left: 1.5rem;
            margin: 0.75rem 0;
        }

        li {
            margin-bottom: 0.5rem;
            line-height: 1.5;
            position: relative;
        }

        li p {
            margin: 0;
            display: inline;
        }
    }

    .lesson-nav {
        display: flex;
        justify-content: space-between;
        margin-top: 2rem;
        padding-top: 1rem;
        border-top: 1px solid var(--secondary);
    }

    /* Code block styles for lessons */
    pre,
    code {
        max-width: 100%;
        white-space: pre-wrap;
        word-wrap: break-word;
        overflow-x: auto;
    }
</style>
<Layout>
    <div class="container">
        <div class="lesson-content">
            <h1>Lesson 3: Custom Domain and SSL Setup</h1>

            <p>
                In the previous lesson we configured our Fastly service for basic operations. Part of the initial setup
                was to create a default, free Fastly domain: prefix..global.ssl.fastly.net. This is perfectly fine for
                initial testing but you may need to use your own domain for public or production use. In this lesson we
                will see how to set it up.
            </p>

            <h2>Prerequisites</h2>

            <p>
                Obviously you will need a domain. Each domain registar provides access to a given domain DNS settings.
                Each DNS configuration panel looks slightly different for every domain registrar and also naming of
                things slightly differes, but you should be able to add and edit your domain CNAME records. Explanation
                of how CNAME records work is out of scope of this course. In GoDaddy, which is my domain registar, it looks like this:
            </p>
            <div class="image-wrapper">
                <img src={godaddyDnsManagement.src} alt="Godaddy DNS management" />
            </div>
            <p>
                On the Fastly side we need to obtain the TLS certificate for the domain. This will give us the SSL layer
                for our setup and the SNI server name that we want to put in the CNAME record to dispatch traffic to
                Fastly. See step by step instructions below.
            </p>

            <h2>Obtaining the TLS Certificate</h2>

            <h2>Proving Ownership of the Domain</h2>

            <h2>Traffic Dispatching Setup</h2>
            <div class="lesson-nav">
                <a href="#" class="button">Previous</a>
                <a href="#" class="button">Next</a>
            </div>
        </div>
    </div>
</Layout>


<!-- Use www. -->

<!-- Before we can do that we need to ensure Fastly that the domain belongs to us. To do that, we need to create a different CNAME record with the answer value equal to the one
Fastly provides us. -->

<!-- You need to create new CNAME record with the name _acme-challenge.www and value as requested by
Fastly -->

